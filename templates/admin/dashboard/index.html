<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Qu·∫£n L√Ω T√†i X·∫ø</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/common.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>üöó QU·∫¢N L√ù T√ÄI X·∫æ</h1>
            <p>H·ªá th·ªëng gi√°m s√°t v√† qu·∫£n l√Ω t√†i x·∫ø</p>
        </div>

        <div class="toolbar">
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="üîç T√¨m ki·∫øm t√†i x·∫ø..." onkeyup="filterDrivers()">
            </div>
            <a href="/add-driver" class="btn btn-primary">‚ûï Th√™m T√†i X·∫ø M·ªõi</a>
        </div>

        <div class="stats">
            <div class="stat-card">
                <h3 id="totalDrivers">{{ drivers|length }}</h3>
                <p>T·ªïng T√†i X·∫ø</p>
            </div>
            <div class="stat-card">
                <h3 id="activeDrivers">{{ drivers|selectattr('status', 'equalto', 'active')|list|length }}</h3>
                <p>ƒêang Ho·∫°t ƒê·ªông</p>
            </div>
            <div class="stat-card">
                <h3 id="inactiveDrivers">{{ drivers|selectattr('status', 'equalto', 'inactive')|list|length }}</h3>
                <p>Kh√¥ng Ho·∫°t ƒê·ªông</p>
            </div>
        </div>

        <div class="drivers-grid" id="driversGrid">
            {% if drivers %}
            {% for driver in drivers %}
            <div class="driver-card" data-driver-name="{{ driver.name|lower }}"
                data-driver-license="{{ driver.license|lower }}">
                <div class="driver-header">
                    <span class="driver-status status-{{ driver.status }}">
                        {{ '‚óè Ho·∫°t ƒë·ªông' if driver.status == 'active' else '‚óè Kh√¥ng ho·∫°t ƒë·ªông' }}
                    </span>
                    <div class="driver-avatar">
                        {{ driver.name[0]|upper }}
                    </div>
                    <div class="driver-name">{{ driver.name }}</div>
                </div>
                <div class="driver-body">
                    <div class="driver-info">
                        <label>B·∫±ng l√°i:</label>
                        <div class="value">{{ driver.license }}</div>
                    </div>
                    <div class="driver-info">
                        <label>S·ªë ƒëi·ªán tho·∫°i:</label>
                        <div class="value">{{ driver.phone }}</div>
                    </div>
                    <div class="driver-info">
                        <label>Stream URL:</label>
                        <div class="value" style="font-size: 0.85em; word-break: break-all;">{{ driver.stream_url }}
                        </div>
                    </div>
                    <div class="driver-actions">
                        <a href="/driver/{{ driver.id }}" class="btn-view">üìπ Xem Video</a>
                    </div>
                    <div class="driver-actions" style="margin-top: 10px;">
                        <a href="/edit-driver/{{ driver.id }}" class="btn-small btn-edit">‚úèÔ∏è S·ª≠a</a>
                        <button onclick="deleteDriver({{ driver.id }}, '{{ driver.name }}')"
                            class="btn-small btn-delete">üóëÔ∏è X√≥a</button>
                    </div>
                </div>
            </div>
            {% endfor %}
            {% else %}
            <div class="empty-state">
                <div style="font-size: 5em; margin-bottom: 20px;">üìã</div>
                <h2>Ch∆∞a c√≥ t√†i x·∫ø n√†o</h2>
                <p>Nh·∫•n "Th√™m T√†i X·∫ø M·ªõi" ƒë·ªÉ b·∫Øt ƒë·∫ßu</p>
            </div>
            {% endif %}
        </div>
    </div>

    <script type="module" src="{{ url_for('static', filename='js/dashboard_module.js') }}"></script>
</body>

</html>